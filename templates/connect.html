<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Saarthi Connect</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts (Matching the clean Dashboard look) -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Confetti JS -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'] },
                    colors: {
                        saarthi: {
                            bg: '#F8F9FA', // Light gray background
                            orange: '#F97316', // Matches Bijli Icon
                            green: '#22C55E', // Matches WhatsApp/Water Icon
                            blue: '#3B82F6', // Matches Cyber Icon
                            dark: '#1E293B', // Text color
                        }
                    },
                    animation: {
                        'slide-up': 'slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1)',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        slideUp: {
                            '0%': { transform: 'translateY(100%)' },
                            '100%': { transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* The Dotted Grid Background from your screenshot */
        body {
            background-color: #F8F9FA;
            background-image: radial-gradient(#CBD5E1 1px, transparent 1px);
            background-size: 24px 24px;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Hide scrollbar for cleaner look */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* Glass Effect */
        .glass {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        /* Voting Animations */
        .vote-active .heart-icon { color: #F97316; font-weight: 900; } 
        .vote-active .upvote-icon { color: #3B82F6; font-weight: 900; }
        .vote-active { background-color: #EFF6FF; border-color: #BFDBFE; }
    </style>
</head>
<body class="text-slate-800 pb-32">

    <!-- ================= TOP HEADER (Matches Screenshot) ================= -->
    <nav class="fixed top-0 w-full z-40 bg-white border-b border-gray-100 shadow-sm h-16 flex items-center px-4 justify-between">
        <div class="flex items-center gap-4">
            <!-- Hamburger Menu -->
            <button class="text-slate-600 text-xl">
                <i class="fa-solid fa-bars"></i>
            </button>
            
            <!-- Logo Area -->
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-white">
                     <i class="fa-solid fa-dharmachakra"></i>
                </div>
                <h1 class="font-bold text-lg text-slate-800 tracking-tight">Saarthi</h1>
            </div>
        </div>

        <!-- Profile & XP Area -->
        <div class="flex items-center gap-3">
            <div id="xp-badge" class="hidden md:flex items-center gap-1 bg-orange-50 px-3 py-1 rounded-full border border-orange-100">
                <i class="fa-solid fa-star text-orange-500 text-xs"></i>
                <span class="text-xs font-bold text-orange-700"><span id="score-val">120</span> XP</span>
            </div>
            <!-- Profile Icon (Green dot status) -->
            <div class="relative w-9 h-9 rounded-full bg-green-50 border border-green-100 flex items-center justify-center text-green-700 cursor-pointer hover:bg-green-100 transition">
                <i class="fa-regular fa-user"></i>
                <div class="absolute top-0 right-0 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-white"></div>
            </div>
        </div>
    </nav>

    <!-- ================= MAIN CONTENT ================= -->
    <main class="max-w-2xl mx-auto pt-24 px-4 space-y-6">

        <!-- DASHBOARD HERO (Contextualized for Connect) -->
        <div class="bg-white rounded-[2rem] p-6 shadow-sm border border-slate-100 relative overflow-hidden flex justify-between items-center">
            <div class="relative z-10">
                <p class="text-sm text-slate-400 font-medium mb-1">Community Hub</p>
                <h2 class="text-2xl font-bold text-slate-800 leading-tight">
                    Hello, <span class="text-saarthi-orange">Citizen</span>
                </h2>
                <p class="text-xs text-slate-500 mt-2 max-w-[200px]">Connect with governance and your local heroes.</p>
                
                <!-- XP Badge for Mobile -->
                <div class="mt-4 inline-flex items-center gap-2 bg-slate-50 border border-slate-200 px-3 py-1.5 rounded-full md:hidden">
                    <i class="fa-solid fa-star text-orange-500 text-xs"></i>
                    <span class="text-xs font-bold text-slate-700"><span id="score-val-mobile">120</span> XP</span>
                </div>
            </div>
            
            <!-- Graphic Element (Cloud/Upload Style from screenshot) -->
            <div class="w-24 h-24 bg-gradient-to-br from-green-100 to-emerald-50 rounded-full flex items-center justify-center relative">
                <div class="absolute inset-0 border-4 border-white rounded-full opacity-50"></div>
                <i class="fa-solid fa-users-viewfinder text-3xl text-green-600 opacity-80"></i>
            </div>
            
            <!-- Background Blob -->
            <div class="absolute top-0 right-0 w-48 h-full bg-gradient-to-l from-green-50/50 to-transparent"></div>
        </div>

        <!-- SEARCH BAR (Matches Screenshot) -->
        <div class="relative group">
            <i class="fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-saarthi-blue transition-colors"></i>
            <input type="text" placeholder="Search citizens, grievances, or heroes..." class="w-full bg-white border border-slate-100 rounded-2xl py-3.5 pl-12 pr-10 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-saarthi-blue/20 transition-all placeholder:text-slate-400">
            <i class="fa-solid fa-microphone absolute right-4 top-1/2 -translate-y-1/2 text-green-600 cursor-pointer hover:scale-110 transition-transform"></i>
        </div>

        <!-- GRID LAYOUT: Leaderboard + Tabs -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            
            <!-- LEFT COLUMN: LEADERBOARD -->
            <div class="md:col-span-1 space-y-4">
                <div class="flex items-center justify-between px-1">
                    <h3 class="font-bold text-slate-800">Top Saarthis</h3>
                    <span class="text-xs font-bold text-saarthi-blue bg-blue-50 px-2 py-1 rounded-md">Week 4</span>
                </div>

                <!-- Leaderboard Card (Styled like Service Cards) -->
                <div class="bg-white rounded-3xl p-5 shadow-sm border border-slate-100">
                    <div class="flex items-end justify-center gap-2">
                        <!-- 2nd -->
                        <div class="flex flex-col items-center w-1/3">
                            <img src="https://i.pravatar.cc/150?u=20" class="w-10 h-10 rounded-full border-2 border-slate-100">
                            <span class="text-[10px] font-bold mt-1">Rahul</span>
                            <div class="h-8 w-full bg-slate-100 rounded-t-lg mt-1 relative"><span class="absolute bottom-0 w-full text-center text-[8px] font-bold text-slate-400">2nd</span></div>
                        </div>
                        <!-- 1st -->
                        <div class="flex flex-col items-center w-1/3 relative -top-1">
                            <i class="fa-solid fa-crown text-yellow-400 text-xs mb-1 animate-bounce"></i>
                            <img src="https://i.pravatar.cc/150?u=49" class="w-12 h-12 rounded-full border-2 border-saarthi-orange">
                            <span class="text-[10px] font-bold mt-1">Priya</span>
                            <div class="h-12 w-full bg-orange-100 rounded-t-lg mt-1 relative border-t border-orange-200"><span class="absolute bottom-0 w-full text-center text-[8px] font-bold text-orange-600">1st</span></div>
                        </div>
                        <!-- 3rd -->
                        <div class="flex flex-col items-center w-1/3">
                            <img src="https://i.pravatar.cc/150?u=12" class="w-10 h-10 rounded-full border-2 border-slate-100">
                            <span class="text-[10px] font-bold mt-1">Amit</span>
                            <div class="h-6 w-full bg-slate-100 rounded-t-lg mt-1 relative"><span class="absolute bottom-0 w-full text-center text-[8px] font-bold text-slate-400">3rd</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RIGHT COLUMN: FEED -->
            <div class="md:col-span-2">
                <!-- Tabs -->
                <div class="flex gap-4 mb-4 border-b border-gray-200/60 pb-1">
                    <button class="text-sm font-bold text-slate-800 border-b-2 border-saarthi-orange pb-2">Community</button>
                    <button class="text-sm font-medium text-slate-400 pb-2 hover:text-slate-600">My Uploads</button>
                </div>

                <!-- Feed Container -->
                <div id="feed-container" class="space-y-4">
                    
                    <!-- Static Post 1 -->
                    <article class="bg-white rounded-3xl p-5 shadow-sm border border-slate-100">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center gap-3">
                                <img src="https://i.pravatar.cc/150?u=49" class="w-10 h-10 rounded-full border border-slate-100">
                                <div>
                                    <h3 class="text-sm font-bold text-slate-900">Priya Sharma</h3>
                                    <p class="text-[10px] text-slate-400">2h ago â€¢ New Delhi</p>
                                </div>
                            </div>
                            <!-- Hero Badge -->
                            <div class="bg-orange-50 border border-orange-100 p-1.5 rounded-lg">
                                <i class="fa-solid fa-medal text-saarthi-orange text-lg"></i>
                            </div>
                        </div>
                        <p class="text-sm text-slate-600 mb-3">Cleanup drive at Sector 4 park. 15 volunteers joined! ðŸŒ¿ <span class="text-saarthi-blue">#CleanIndia</span></p>
                        
                        <div class="relative h-48 w-full rounded-2xl overflow-hidden bg-slate-50 mb-3 group">
                            <img src="https://images.unsplash.com/photo-1550989460-0adf9ea622e2?q=80&w=800&auto=format&fit=crop" class="w-full h-full object-cover">
                            <!-- AI Badge -->
                            <div class="absolute bottom-2 right-2 bg-white/90 backdrop-blur-sm px-2 py-1 rounded-lg flex items-center gap-1.5 shadow-sm">
                                <i class="fa-solid fa-wand-magic-sparkles text-saarthi-green text-xs"></i>
                                <span class="text-[10px] font-bold text-slate-700">AI Verified</span>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="flex items-center gap-4">
                            <button onclick="handleVote(this, 'heart')" class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-50 text-slate-500 hover:bg-orange-50 transition group">
                                <i class="fa-regular fa-heart heart-icon group-hover:text-orange-500"></i>
                                <span class="text-xs font-bold count-val">42</span>
                            </button>
                        </div>
                    </article>

                </div>
            </div>
        </div>

    </main>

    <!-- ================= FLOATING DOCK (Matches Screenshot) ================= -->
    <div class="fixed bottom-6 left-0 right-0 z-40 px-4 flex justify-center">
        <!-- The Pill Container -->
        <div class="bg-white rounded-full px-8 py-3 shadow-[0_8px_30px_rgb(0,0,0,0.12)] flex items-center gap-10 border border-slate-50">
            
            <!-- Home -->
            <button class="flex flex-col items-center gap-1 text-slate-800">
                <i class="fa-solid fa-house text-xl"></i>
                <span class="text-[9px] font-bold">Home</span>
            </button>

            <!-- ADD BUTTON (Floating) -->
            <button onclick="openModal()" class="relative -top-8 group">
                <div class="absolute inset-0 bg-blue-300 rounded-full blur opacity-40 group-hover:opacity-60 transition-opacity"></div>
                <div class="relative w-14 h-14 rounded-full bg-saarthi-blue text-white shadow-xl flex items-center justify-center transform group-hover:scale-105 transition-all border-4 border-white">
                    <i class="fa-solid fa-plus text-xl"></i>
                </div>
            </button>

            <!-- Rewards (Matches Screenshot Icon style) -->
            <button class="flex flex-col items-center gap-1 text-slate-400 hover:text-saarthi-orange transition-colors">
                <i class="fa-solid fa-award text-xl"></i>
                <span class="text-[9px] font-bold">Rewards</span>
            </button>

        </div>
    </div>

    <!-- ================= UPLOAD MODAL (Consistent Style) ================= -->
    <div id="upload-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-slate-900/20 backdrop-blur-sm transition-opacity opacity-0" id="modal-backdrop" onclick="closeModal()"></div>
        <div class="absolute bottom-0 w-full max-w-md left-1/2 -translate-x-1/2 bg-white rounded-t-[2rem] p-6 shadow-2xl transform translate-y-full transition-transform duration-300" id="modal-sheet">
            
            <div class="w-12 h-1.5 bg-slate-200 rounded-full mx-auto mb-6"></div>
            <h3 class="text-lg font-bold text-slate-800 mb-5">Create New Post</h3>

            <form id="upload-form" onsubmit="handleSubmit(event)">
                <!-- Selector -->
                <div class="grid grid-cols-2 gap-3 mb-5">
                    <label class="cursor-pointer relative h-16">
                        <input type="radio" name="type" value="hero" class="peer hidden" checked>
                        <div class="absolute inset-0 rounded-2xl border border-slate-200 bg-slate-50 peer-checked:border-saarthi-orange peer-checked:bg-orange-50 peer-checked:text-saarthi-orange text-slate-400 transition-all flex items-center justify-center gap-2 font-bold text-sm">
                            <i class="fa-solid fa-medal"></i> Civic Hero
                        </div>
                    </label>
                    <label class="cursor-pointer relative h-16">
                        <input type="radio" name="type" value="grievance" class="peer hidden">
                        <div class="absolute inset-0 rounded-2xl border border-slate-200 bg-slate-50 peer-checked:border-red-500 peer-checked:bg-red-50 peer-checked:text-red-500 text-slate-400 transition-all flex items-center justify-center gap-2 font-bold text-sm">
                            <i class="fa-solid fa-triangle-exclamation"></i> Grievance
                        </div>
                    </label>
                </div>

                <!-- Image Upload with Preview -->
                <div class="mb-4">
                    <div class="relative w-full h-40 rounded-2xl overflow-hidden group border border-slate-200 bg-slate-50">
                        <input type="file" id="file-input" accept="image/*" onchange="previewImage(event)" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20">
                        
                        <!-- Placeholder -->
                        <div id="upload-placeholder" class="w-full h-full flex flex-col items-center justify-center gap-2">
                            <div class="w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center">
                                <i class="fa-solid fa-camera text-slate-400"></i>
                            </div>
                            <span class="text-xs font-bold text-slate-500">Tap to upload proof</span>
                        </div>

                        <!-- Preview -->
                        <div id="preview-container" class="hidden w-full h-full relative z-10 bg-black">
                            <img id="image-preview" class="w-full h-full object-cover opacity-80">
                            <button type="button" onclick="removeImage(event)" class="absolute top-2 right-2 z-30 bg-white/20 backdrop-blur-md text-white w-6 h-6 rounded-full flex items-center justify-center">
                                <i class="fa-solid fa-xmark text-xs"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <textarea id="desc" rows="2" class="w-full bg-slate-50 border border-slate-200 rounded-xl p-3 text-sm focus:outline-none focus:ring-2 focus:ring-saarthi-blue/50 resize-none mb-4" placeholder="Description..." required></textarea>

                <button type="submit" id="submit-btn" class="w-full bg-slate-900 text-white font-bold text-sm py-3.5 rounded-xl shadow-lg flex justify-center items-center gap-2">
                    Submit Post
                </button>
                <div class="h-4"></div>
            </form>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed top-20 left-1/2 -translate-x-1/2 z-50 pointer-events-none opacity-0 transition-all duration-500 transform -translate-y-4">
        <div class="bg-slate-900 text-white px-5 py-2.5 rounded-full shadow-xl flex items-center gap-3 text-sm font-medium">
            <i class="fa-solid fa-circle-check text-green-400"></i>
            <span id="toast-msg">Success</span>
        </div>
    </div>

    <!-- Logic -->
    <script>
        let userXP = 120;
        let uploadedImageData = null;

        // --- UI UPDATERS ---
        function updateXP(amount) {
            userXP += amount;
            document.getElementById('score-val').innerText = userXP;
            document.getElementById('score-val-mobile').innerText = userXP;
            
            // Pulse animation on badge
            const badge = document.getElementById('xp-badge');
            badge.classList.add('scale-110', 'bg-orange-100');
            setTimeout(() => badge.classList.remove('scale-110', 'bg-orange-100'), 300);
        }

        // --- IMAGE HANDLING ---
        function previewImage(event) {
            const file = event.target.files[0];
            if(file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    uploadedImageData = e.target.result;
                    document.getElementById('image-preview').src = uploadedImageData;
                    document.getElementById('upload-placeholder').classList.add('hidden');
                    document.getElementById('preview-container').classList.remove('hidden');
                }
                reader.readAsDataURL(file);
            }
        }

        function removeImage(e) {
            e.stopPropagation();
            document.getElementById('file-input').value = "";
            uploadedImageData = null;
            document.getElementById('preview-container').classList.add('hidden');
            document.getElementById('upload-placeholder').classList.remove('hidden');
        }

        // --- FORM SUBMIT ---
        function handleSubmit(e) {
            e.preventDefault();
            if (!uploadedImageData) { alert("Image required!"); return; }

            const btn = document.getElementById('submit-btn');
            const type = document.querySelector('input[name="type"]:checked').value;
            const desc = document.getElementById('desc').value;
            
            btn.innerHTML = `<i class="fa-solid fa-spinner fa-spin"></i> Processing...`;
            
            setTimeout(() => {
                const points = type === 'hero' ? 20 : 10;
                updateXP(points);
                
                // Add to Feed
                const container = document.getElementById('feed-container');
                const badgeIcon = type === 'hero' ? 'fa-medal text-saarthi-orange' : 'fa-triangle-exclamation text-red-500';
                const badgeBg = type === 'hero' ? 'bg-orange-50 border-orange-100' : 'bg-red-50 border-red-100';

                const html = `
                <article class="bg-white rounded-3xl p-5 shadow-sm border border-slate-100 animate-slide-up">
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex items-center gap-3">
                            <img src="https://i.pravatar.cc/150?u=${Math.random()}" class="w-10 h-10 rounded-full border border-slate-100">
                            <div><h3 class="text-sm font-bold text-slate-900">You</h3><p class="text-[10px] text-slate-400">Just now</p></div>
                        </div>
                        <div class="${badgeBg} p-1.5 rounded-lg"><i class="fa-solid ${badgeIcon} text-lg"></i></div>
                    </div>
                    <p class="text-sm text-slate-600 mb-3">${desc}</p>
                    <div class="relative h-48 w-full rounded-2xl overflow-hidden bg-slate-50 mb-3">
                        <img src="${uploadedImageData}" class="w-full h-full object-cover">
                        <div class="absolute bottom-2 right-2 bg-white/90 backdrop-blur-sm px-2 py-1 rounded-lg flex items-center gap-1.5 shadow-sm">
                            <i class="fa-solid fa-robot text-saarthi-blue text-xs"></i>
                            <span class="text-[10px] font-bold text-slate-700">Analyzing</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-4">
                        <button onclick="handleVote(this, 'heart')" class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-50 text-slate-500 hover:bg-orange-50 transition group">
                            <i class="fa-regular fa-heart heart-icon group-hover:text-orange-500"></i>
                            <span class="text-xs font-bold count-val">0</span>
                        </button>
                    </div>
                </article>`;
                
                container.insertAdjacentHTML('afterbegin', html);
                
                // Reset
                btn.innerText = "Submit Post";
                document.getElementById('upload-form').reset();
                removeImage(e);
                closeModal();
                showToast(`Post Live! +${points} XP`);
                confetti({ particleCount: 80, spread: 60, origin: { y: 0.7 } });

            }, 1500);
        }

        // --- VOTING ---
        function handleVote(btn, type) {
            const isVoted = btn.classList.contains('vote-active');
            const countEl = btn.querySelector('.count-val');
            let count = parseInt(countEl.innerText);
            
            if(!isVoted) {
                btn.classList.add('vote-active');
                countEl.innerText = count + 1;
                if(type === 'heart') {
                    btn.querySelector('i').classList.remove('fa-regular');
                    btn.querySelector('i').classList.add('fa-solid');
                }
                updateXP(1);
            } else {
                btn.classList.remove('vote-active');
                countEl.innerText = count - 1;
                if(type === 'heart') {
                    btn.querySelector('i').classList.remove('fa-solid');
                    btn.querySelector('i').classList.add('fa-regular');
                }
            }
        }

        // --- MODAL UTILS ---
        const modal = document.getElementById('upload-modal');
        const backdrop = document.getElementById('modal-backdrop');
        const sheet = document.getElementById('modal-sheet');

        function openModal() {
            modal.classList.remove('hidden');
            setTimeout(() => { backdrop.classList.remove('opacity-0'); sheet.classList.remove('translate-y-full'); }, 10);
        }
        function closeModal() {
            backdrop.classList.add('opacity-0'); sheet.classList.add('translate-y-full');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }
        function showToast(msg) {
            const t = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            t.classList.remove('opacity-0', '-translate-y-4');
            t.classList.add('opacity-100', 'translate-y-0');
            setTimeout(() => {
                t.classList.add('opacity-0', '-translate-y-4');
                t.classList.remove('opacity-100', 'translate-y-0');
            }, 3000);
        }
    </script>
</body>
</html>